buildscript {
    rootProject.name = 'tutteli-gradle'
    gradle.ext.version = '0.3.0'

    gradle.ext.repo = "${rootProject.projectDir}/repo"

    def error = false
    if(!error) {
        apply from: "${rootProject.projectDir}/gradle/scripts/localRepo.gradle"
        includeLocalRepo(gradle.ext.repo, 'settings', gradle.ext.version, this)
    }

    if (error || !ext.localPluginExists) {
        repositories {
            maven {
                url "https://plugins.gradle.org/m2/"
            }
        }
        dependencies {
            classpath "ch.tutteli:tutteli-gradle-settings:0.2.0"
        }
    }
}

apply plugin: 'ch.tutteli.settings'

//TODO remove if 0.3.0 is published
if(ext.localPluginExists) {
    include {
        settings
        junitjacoco
    }
} else {
    includePrefixed('settings', 'junitjacoco')
}
